<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>new function</title>
</head>

<body>
  <script type="text/javascript">
    function printValue(){
      console.log(this.value);
    }
    function TestObject(val){
      this.value = val;

    }

    TestObject.prototype.printValue = printValue.bind(this);

    function _new(func){
      var obj = new Object();
      this = obj;
      var args = Array.prototype.slice.apply(arguments, [1]);
      func.apply(this,args);
      this.__proto__ = func.prototype
      return this;
    }
    var value = 10;
    var obj1 = new TestObject(6);
    var obj2 = _new(TestObject,6);
    console.log(TestObject.prototype);
    console.log(obj1);
    console.log(obj2);
  </script>

</body>
</html>
